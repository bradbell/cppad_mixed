<html>
<script type='text/x-mathjax-config'>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath:  [ ['@(@','@)@'] ] ,
    displayMath: [ ['@[@','@]@'] ]
  }
});
</script>
<script type='text/javascript' src=
'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=default'
>
</script>
<head>
<title>Changes and Additions to cppad_mixed During 2020</title>
<meta http-equiv='Content-Type' content='text/html' charset='utf-8'>
<meta name="description" id="description" content="Changes and Additions to cppad_mixed During 2020">
<meta name="keywords" id="keywords" content=" changes additions to cppad_mixed during 2020 08-31 08-21 07-02 06-30 06-07 05-30 05-29 05-27 03-28 03-25 03-23 03-22 03-18 03-15 api change ">
<style type='text/css'>
body { color : black }
body { background-color : white }
A:link { color : blue }
A:visited { color : purple }
A:active { color : purple }
</style>
<script type='text/javascript' language='JavaScript' src='_whats_new_20_htm.js'>
</script>
</head>
<body>
<table><tr>
<td>
<a href="https://github.com/bradbell/cppad_mixed" target="_top"><img border="0" src="_image.gif"></a>
</td>
<td><a href="release_notes.htm" target="_top">Prev</a>
</td><td><a href="whats_new_19.htm" target="_top">Next</a>
</td><td>
<select onchange='choose_across0(this)'>
<option>Index-&gt;</option>
<option>contents</option>
<option>reference</option>
<option>index</option>
<option>search</option>
<option>external</option>
</select>
</td>
<td>
<select onchange='choose_up0(this)'>
<option>Up-&gt;</option>
<option>cppad_mixed</option>
<option>release_notes</option>
<option>whats_new_20</option>
</select>
</td>
<td>
<script type='text/javascript' language='JavaScript' src='_childtable_cppad_mixed_htm.js'></script>
</td>
<td>
<script type='text/javascript' language='JavaScript' src='_childtable_release_notes_htm.js'></script>
</td>
<td>whats_new_20</td>
</tr></table><br>
@(@\newcommand{\R}[1]{ {\rm #1} }
\newcommand{\B}[1]{ {\bf #1} }
\newcommand{\W}[1]{ \; #1 \; }@)@


<center><b><big><big>Changes and Additions to cppad_mixed During 2020</big></big></b></center>

<br><a href="whats_new_20.htm#08-31" target="_top">08-31</a>
<br><a href="whats_new_20.htm#08-21" target="_top">08-21</a>
<br><a href="whats_new_20.htm#07-02" target="_top">07-02</a>
<br><a href="whats_new_20.htm#06-30" target="_top">06-30</a>
<br><a href="whats_new_20.htm#06-07" target="_top">06-07</a>
<br><a href="whats_new_20.htm#05-30" target="_top">05-30</a>
<br><a href="whats_new_20.htm#05-29" target="_top">05-29</a>
<br><a href="whats_new_20.htm#05-27" target="_top">05-27</a>
<br><a href="whats_new_20.htm#03-28" target="_top">03-28</a>
<br><a href="whats_new_20.htm#03-25" target="_top">03-25</a>
<br><a href="whats_new_20.htm#03-23" target="_top">03-23</a>
<br><a href="whats_new_20.htm#03-22" target="_top">03-22</a>
<br><a href="whats_new_20.htm#03-18" target="_top">03-18</a>
<br><a href="whats_new_20.htm#03-15" target="_top">03-15</a>
<br>&#160;&#160;&#160;&#160;&#160;<a href="whats_new_20.htm#03-15.API Change" target="_top">API&nbsp;Change</a>
<br><br>
<b><big><a name="08-31" id="08-31">08-31</a></big></b>
<br>
Fix a bug in the computation of the first derivative of the
fixed effects objective when
<a href="run_cmake.sh.htm#ldlt_cholmod" target="_top"><span style='white-space: nowrap'>ldlt_cholmod</span></a>
 was <code><font color="blue">yes</font></code>.
To be more specific, the permutation for the LDLT factor was
being used where the inverse permutation was required.

<br>
<br>
<b><big><a name="08-21" id="08-21">08-21</a></big></b>
<br>
The following improvements we made to the install process:
<ol type="1"><li>
Fix the check of <a href="run_cmake.sh.htm#ipopt_prefix" target="_top"><span style='white-space: nowrap'>ipopt_prefix</span></a>

in <code><font color="blue">bin/example_install.sh</font></code>.
</li><li>

Fix <code><font color="blue">bin/install_eigen.sh</font></code> because eigen
moved from bitbucket to gitlab.
</li><li>

Change <code><font color="blue">bin/install_ipopt.sh</font></code> to directly run configure
instead of using <code><font color="blue">coinbrew</font></code>.
</li></ol>


<br>
<br>
<b><big><a name="07-02" id="07-02">07-02</a></big></b>
<br>
Add the 
<code><i><font color="black"><span style='white-space: nowrap'>error_msg</span></font></i></code>
 result to the
<a href="sample_fixed.htm#error_msg" target="_top"><span style='white-space: nowrap'>sample_fixed</span></a>
 and
<a href="sample_random.htm#error_msg" target="_top"><span style='white-space: nowrap'>sample_random</span></a>
 routines.

<br>
<br>
<b><big><a name="06-30" id="06-30">06-30</a></big></b>

<ol type="1"><li>
<b>API Change</b>:
The last (6th) argument to the <a href="sample_fixed.htm" target="_top"><span style='white-space: nowrap'>sample_fixed</span></a>
 function
(the optimal random effects 
<code><i><font color="black"><span style='white-space: nowrap'>random_opt</span></font></i></code>
)
is no longer being used and has been removed.
</li><li>

Improve error message when fixed effects information matrix is
not positive definite during a <code><font color="blue">sample_fixed</font></code> call.
In addition, always make this condition a fatal error.
</li><li>

Change <a href="sample_fixed.cpp.htm" target="_top"><span style='white-space: nowrap'>sample_fixed.cpp</span></a>
, <a href="capture_xam.cpp.htm" target="_top"><span style='white-space: nowrap'>capture_xam.cpp</span></a>
,
and <a href="ar1_xam.cpp.htm" target="_top"><span style='white-space: nowrap'>ar1_xam.cpp</span></a>
 to use <a href="hes_fixed_obj.htm" target="_top"><span style='white-space: nowrap'>hes_fixed_obj</span></a>

(instead of the deprecated routine <code><font color="blue">information_mat</font></code>)
to calculation the fixed effects information matrix <a href="hes_fixed_obj.htm" target="_top"><span style='white-space: nowrap'>hes_fixed_obj</span></a>
.
</li></ol>



<br>
<br>
<b><big><a name="06-07" id="06-07">06-07</a></big></b>

<ol type="1"><li>
Advance to ipopt-3.13.2 and cppad-20200606.
</li><li>

Change the CppAD options used for
<a href="run_cmake.sh.htm#optimize_cppad_function" target="_top"><span style='white-space: nowrap'>optimizing&nbsp;cppad&nbsp;functions</span></a>
.
This is intended to be an improvement for large problems,
but the <a href="ar1_xam.sh.htm" target="_top"><span style='white-space: nowrap'>ar1_xam.sh</span></a>
 and <a href="capture_xam.sh.htm" target="_top"><span style='white-space: nowrap'>capture_xam.sh</span></a>
 speed tests
did not show much change.
</li><li>

The <code><font color="blue">ndebug_defined</font></code> output was added to the
<a href="capture_xam.cpp.htm#Output.ndebug_defined" target="_top"><span style='white-space: nowrap'>capture_xam.cpp</span></a>
  and
<a href="ar1_xam.cpp.htm#Output.ndebug_defined" target="_top"><span style='white-space: nowrap'>ar1_xam.cpp</span></a>
 examples.
</li><li>

The following speed test parameters were increased: the
<a href="ar1_xam.cpp.htm#Command Arguments.number_random" target="_top"><span style='white-space: nowrap'>number_random</span></a>

effects in <a href="ar1_xam.sh.htm" target="_top"><span style='white-space: nowrap'>ar1_xam.sh</span></a>
, the
<a href="capture_xam.cpp.htm#Command Arguments.number_random" target="_top"><span style='white-space: nowrap'>number_random</span></a>

effects in <a href="capture_xam.sh.htm" target="_top"><span style='white-space: nowrap'>capture_xam.sh</span></a>
, the
<a href="capture_xam.cpp.htm#Command Arguments.number_locations" target="_top"><span style='white-space: nowrap'>number_locations</span></a>

effects in <a href="capture_xam.sh.htm" target="_top"><span style='white-space: nowrap'>capture_xam.sh</span></a>

</li></ol>



<br>
<br>
<b><big><a name="05-30" id="05-30">05-30</a></big></b>
<br>
Some more improvements were made to the
<code><font color="blue">adaptive</font></code> and <code><font color="blue">trace-adaptive</font></code>
<a href="optimize_fixed.htm#fixed_ipopt_options.derivative_test" target="_top"><span style='white-space: nowrap'>derivative_test</span></a>

options.
To be specific, the scale of the function values (derivative values)
were taking into account when checking derivatives (Hessians).


<br>
<br>
<b><big><a name="05-29" id="05-29">05-29</a></big></b>
<br>
Add an error message when the Hessian with respect to the
random effects is not positive definite during the initialization of the
second order approximation for the objective, when
<a href="derived_ctor.htm#quasi_fixed" target="_top"><span style='white-space: nowrap'>quasi_fixed</span></a>
 is false.

<br>
<br>
<b><big><a name="05-27" id="05-27">05-27</a></big></b>
<br>
The <code><font color="blue">adaptive</font></code> and <code><font color="blue">trace-adaptive</font></code>
<a href="optimize_fixed.htm#fixed_ipopt_options.derivative_test" target="_top"><span style='white-space: nowrap'>derivative_test</span></a>

options were improved.
To be specific, the larger step size was used unless significant
improvement is achieved by a smaller step size.
This reduces the amount of numerical round off to consider in the comparison.

<br>
<br>
<b><big><a name="03-28" id="03-28">03-28</a></big></b>
<br>
The release version of the <a href="hes_random_obj.htm" target="_top"><span style='white-space: nowrap'>hes_random_obj</span></a>
 routine would
crash when there were no random effects.
This has been fixed.

<br>
<br>
<b><big><a name="03-25" id="03-25">03-25</a></big></b>
<br>
The debug version of the <a href="hes_random_obj.htm" target="_top"><span style='white-space: nowrap'>hes_random_obj</span></a>
 routine would
fail with an assert where there were no random effects.
This has been changed so it returns an empty matrix
(the same as the release version).

<br>
<br>
<b><big><a name="03-23" id="03-23">03-23</a></big></b>
<br>
Change the notation 'total objective' to
<a href="theory.htm#Objective.Fixed Effects Objective, L(theta)" target="_top"><span style='white-space: nowrap'>fixed&nbsp;effects&nbsp;objective</span></a>

and define the
<a href="theory.htm#Random Likelihood, f(theta, u).Random Effects Objective" target="_top"><span style='white-space: nowrap'>random&nbsp;effects&nbsp;objective</span></a>
.

<br>
<br>
<b><big><a name="03-22" id="03-22">03-22</a></big></b>

<ol type="1"><li>
The specifications for the
<a href="sample_random.htm#Covariance" target="_top"><span style='white-space: nowrap'>covariance</span></a>
 of the random effect
computed by <code><font color="blue">sample_random</font></code> was edited.
</li><li>

<a href="information_mat.htm" target="_top"><span style='white-space: nowrap'>information_mat</span></a>
 was deprecated and replaced by
<a href="hes_fixed_obj.htm" target="_top"><span style='white-space: nowrap'>hes_fixed_obj</span></a>
.
</li><li>

The <a href="hes_random_obj.htm" target="_top"><span style='white-space: nowrap'>hes_random_obj</span></a>
 routine was added.
</li></ol>


<br>
<br>
<b><big><a name="03-18" id="03-18">03-18</a></big></b>
<br>
It is no longer necessary to have the problem Lagrange multipliers
in the <a href="sample_fixed.htm#solution" target="_top"><span style='white-space: nowrap'>solution</span></a>
 argument to
<code><font color="blue">sample_fixed</font></code>.

<br>
<br>
<b><big><a name="03-15" id="03-15">03-15</a></big></b>
<br>
Change the <a href="sample_fixed.htm" target="_top"><span style='white-space: nowrap'>sample_fixed</span></a>
 routine to ignore all the constraints
except where the lower and upper limits for a fixed effect are equal,
<a href="sample_fixed.htm#Constant Fixed Effects" target="_top"><span style='white-space: nowrap'>constant&nbsp;fixed&nbsp;effects</span></a>
.
This is an over estimate of the variance but is faster to calculate.

<br>
<br>
<big><a name="03-15.API Change" id="03-15.API Change">API Change</a></big>
<br>
The new <a href="sample_fixed.htm" target="_top"><span style='white-space: nowrap'>sample_fixed</span></a>
 routine may result in samples that
are not within the lower and upper limits for the fixed effects;
<a href="sample_fixed.htm#fixed_lower" target="_top"><span style='white-space: nowrap'>fixed_lower</span></a>
 and
<a href="sample_fixed.htm#fixed_upper" target="_top"><span style='white-space: nowrap'>fixed_upper</span></a>
.
You may want to modify these samples to be within these limits
before you use them.



<hr>Input File: omh/whats_new/20.omh

</body>
</html>

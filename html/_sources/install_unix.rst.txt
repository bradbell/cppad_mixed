.. include:: xrst_preamble.rst

.. _install_unix-name:

!!!!!!!!!!!!
install_unix
!!!!!!!!!!!!

xrst input file: ``xrst/install_unix.xrst``

.. meta::
   :keywords: install_unix, installing, cppad_mixed, in, unix

.. index:: install_unix, installing, cppad_mixed, in, unix

.. _install_unix-title:

Installing cppad_mixed in Unix
##############################

.. meta::
   :keywords: system, requirements

.. index:: system, requirements

.. _install_unix@System Requirements:

System Requirements
*******************
The following programs are required by cppad_mixed
and should have standard system installs:

.. meta::
   :keywords: c++, compiler

.. index:: c++, compiler

.. _install_unix@System Requirements@C++ Compiler:

C++ Compiler
============
The ``cppad_mixed`` program can be compiled by any C++11 compliant compiler;
e.g., ``g++`` .

.. meta::
   :keywords: git

.. index:: git

.. _install_unix@System Requirements@git:

git
===
The `git <https://git-scm.com/>`_ program,
a source code version control system,
must be installed.

.. meta::
   :keywords: cmake

.. index:: cmake

.. _install_unix@System Requirements@cmake:

cmake
=====
The `cmake <http://www.cmake.org/>`_ program,
which installs other programs,
must be installed.

.. meta::
   :keywords: wget

.. index:: wget

.. _install_unix@System Requirements@wget:

wget
====
The `wget <https://www.gnu.org/software/wget/>`_
program must be installed.

.. meta::
   :keywords: fortran, compiler

.. index:: fortran, compiler

.. _install_unix@System Requirements@Fortran Compiler:

Fortran Compiler
================
A fortran compiler is required by ``ipopt`` which in turn
is required by ``cppad_mixed`` .

.. meta::
   :keywords: gsl

.. index:: gsl

.. _install_unix@System Requirements@gsl:

gsl
===
`gsl <http://gnuwin32.sourceforge.net/packages/gsl.htm>`_,
the gnu scientific library.
Note that the development headers are required; e.g.,
on Fedora or Red-Hat one needs to install ``gsl-devel`` .

.. meta::
   :keywords: pkg-config

.. index:: pkg-config

.. _install_unix@System Requirements@pkg-config:

pkg-config
==========
The `pkg-config <http://www.freedesktop.org/wiki/Software/pkg-config/>`_
program must be installed.
The following command should work:

   ``pkg-config gsl --libs``

see :ref:`install_unix@Paths@PKG_CONFIG_PATH` below.

.. meta::
   :keywords: suitesparse

.. index:: suitesparse

.. _install_unix@System Requirements@suitesparse:

suitesparse
===========
The `suitesparse <http://faculty.cse.tamu.edu/davis/SuiteSparse>`_
sparse matrix package.
Note that the development headers are required; e.g.,
on Fedora or Red-Hat one needs to install ``suitesparse-devel`` .
Note that installing ``suitesparse`` will include the ``metis``
package and neither of these packages have ``pkg-config`` files.
It may be necessary for you to add the corresponding paths to your
dynamic library linking path shell variable.

.. meta::
   :keywords: download

.. index:: download

.. _install_unix@Download:

Download
********
After installing the requirements above,
use the following command to get the current version of cppad_mixed:

| |tab| ``git clone https://github.com/bradbell/cppad_mixed.git cppad_mixed.git``
| |tab| ``cd cppad_mixed.git``

You can determine the *git_hash* and version number
corresponding to this checkout of the master branch using the commands:

| |tab| ``git show-ref`` | ``grep`` ``'refs/heads/master'``
| |tab| ``grep`` '^ ``SET`` ( ``cppad_mixed_version`` ' ``CMakeLists.txt``

You can checkout an old version corresponding to a specific *git_hash* ,
and check its version number, using the commands:

| |tab| ``git checkout -q`` *git_hash*
| |tab| ``grep`` '^ ``SET`` ( ``cppad_mixed_version`` ' ``CMakeLists.txt``

.. meta::
   :keywords: special, requirements

.. index:: special, requirements

.. _install_unix@Special Requirements:

Special Requirements
********************
The packages listed below are required by cppad_mixed
and may not have standard system installs.
The ``install_`` *package* scripts below can be used to install them.
If so, they should be executed in the order that they appear.

.. meta::
   :keywords: run_cmake.sh

.. index:: run_cmake.sh

.. _install_unix@Special Requirements@run_cmake.sh:

run_cmake.sh
============
The settings in
:ref:`bin/run_cmake.sh<run_cmake.sh-name>` are used by the
scripts that install the special requirements. You must first change
these settings to the appropriate values for your system before
running these scripts.

.. meta::
   :keywords: eigen

.. index:: eigen

.. _install_unix@Special Requirements@eigen:

eigen
=====
The `eigen <http://eigen.tuxfamily.org>`_
linear algebra package.
Starting in the ``cppad_mixed.git`` directory,
the command

   ``bin/install_eigen.sh``

can be used to install this package.

.. meta::
   :keywords: ipopt

.. index:: ipopt

.. _install_unix@Special Requirements@Ipopt:

Ipopt
=====
The `Ipopt <https://projects.coin-or.org/Ipopt>`_
optimization package.
Starting in the ``cppad_mixed.git`` directory,
the command

   ``bin/install_ipopt.sh``

can be used to install this package.

.. meta::
   :keywords: cppad

.. index:: cppad

.. _install_unix@Special Requirements@CppAD:

CppAD
=====
The `cppad <http://www.coin-or.org/CppAD/>`_
C++ algorithmic differentiation package.
Starting in the ``cppad_mixed.git`` directory,
the command

   ``bin/install_cppad.sh``

can be used to install this package.

.. meta::
   :keywords: paths

.. index:: paths

.. _install_unix@Paths:

Paths
*****

.. meta::
   :keywords: pkg_config_path

.. index:: pkg_config_path

.. _install_unix@Paths@PKG_CONFIG_PATH:

PKG_CONFIG_PATH
===============
For *pkg* equal to ``gsl`` , ``eigen`` , ``ipopt`` and
``cppad`` , the following command should work:

   ``pkg-config`` *pkg* ``--libs``

(This command should work for ``gsl`` before the special requirements
are installed.)
If this command fails, the corresponding directory is missing
from the ``PKG_CONFIG_PATH`` environment variable.
If *prefix* is the prefix where ``pkg`` was installed,
the command

   ``find -L`` *prefix* ``-name`` *pkg* . ``pc 2> /dev/null``

can be used to find the directory where ``%pkg%.pc`` is located.

.. meta::
   :keywords: ld_library_path

.. index:: ld_library_path

.. _install_unix@Paths@LD_LIBRARY_PATH:

LD_LIBRARY_PATH
===============
The library locations are set at link time using cmake's
`always full rpath <https://gitlab.kitware.com/cmake/community/-/wikis/doc/cmake/RPATH-handling>`_
commands.
It should not be necessary to set ``LD_LIBRARY_PATH`` in order for
``cppad_mixed`` to work if you specify the directory using an
``rpath`` command when you build your executable.

.. meta::
   :keywords: cppad_mixed

.. index:: cppad_mixed

.. _install_unix@cppad_mixed:

cppad_mixed
***********
The steps above need to be executed once,
for each :ref:`run_cmake.sh@build_type` that you will used.
They do not need to be executed each new version of ``cppad_mixed``
unless the :ref:`release_notes-name` say otherwise.
The steps below will need to be executed each time you install
a new version of ``cppad_mixed`` :

.. meta::
   :keywords: cmake, command

.. index:: cmake, command

.. _install_unix@cppad_mixed@Cmake Command:

Cmake Command
=============
Starting in the ``cppad_mixed.git`` directory:
The following command will configure ``cppad_mixed`` :
::

   bin/run_cmake.sh

.. meta::
   :keywords: check

.. index:: check

.. _install_unix@cppad_mixed@Check:

Check
=====
Starting in the ``cppad_mixed.git`` directory:
The following commands are optional and will
build and run the examples and correctness tests:
::

   cd build
   make check

.. meta::
   :keywords: speed

.. index:: speed

.. _install_unix@cppad_mixed@Speed:

Speed
=====
Starting in the ``cppad_mixed.git`` directory:
The following commands are optional and will
build and run the speed tests:
::

   cd build
   make speed

.. meta::
   :keywords: install

.. index:: install

.. _install_unix@cppad_mixed@Install:

Install
=======
Starting in the ``cppad_mixed.git`` directory:
The following command will
install the cppad_mixed library and include files:
::

   cd build
   make install

.. meta::
   :keywords: example

.. index:: example

.. _install_unix@Example:

Example
*******

.. meta::
   :keywords: installation

.. index:: installation

.. _install_unix@Example@Installation:

Installation
============
The file :ref:`example_install.sh-name` contains an example installation.

.. meta::
   :keywords: linking

.. index:: linking

.. _install_unix@Example@Linking:

Linking
=======
The file :ref:`check_install.sh-name` is an example of compiling, linking
and running using an
:ref:`installed<install_unix@cppad_mixed@Install>` version of
``cppad_mixed`` .

.. meta::
   :keywords: using, cppad_mixed

.. index:: using, cppad_mixed

.. _install_unix@Example@Using cppad_mixed:

Using cppad_mixed
=================
The files
:ref:`ar1_xam.cpp-name` and :ref:`capture_xam.cpp-name`
contain examples and speed tests
of ``cppad_mixed`` .
These examples run when one executes the commands
::

   cd build
   make speed

.. toctree::
   :maxdepth: 1
   :hidden:

   example_install.sh
   run_cmake.sh
   check_install.sh
